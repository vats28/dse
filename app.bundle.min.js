function getController(t){var e=angular.element(document.querySelector("[ng-controller="+t+"]")).scope();return e}angular.module("starter",["ionic","ngCordova","ngCordovaOauth","starter.controllers","starter.landing","starter.createEnquiry","starter.addVehicleInfo","starter.add_personal_info","starter.enquiryList","starter.enquiryDetail","starter.searchFilter","starter.dashboard","starter.contactList","starter.contactDetail","starter.vehicleDetail","starter.createNewEnquiry","starter.followupList","starter.searchEnquiryList","starter.closeEnquiryModal","starter.followupEnquiryModal","starter.pendingFollowupList","utils.date_picker","ion-fab-button","utils.http_post","utils.fileTransfer"],["$httpProvider",function(t){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var e=function(t){var r,a,n,l,i,o,s,u="";for(r in t)if(a=t[r],a instanceof Array)for(s=0;s<a.length;++s)i=a[s],n=r+"["+s+"]",o={},o[n]=i,u+=e(o)+"&";else if(a instanceof Object)for(l in a)i=a[l],n=r+"["+l+"]",o={},o[n]=i,u+=e(o)+"&";else void 0!==a&&null!==a&&(u+=encodeURIComponent(r)+"="+encodeURIComponent(a)+"&");return u.length?u.substr(0,u.length-1):u};t.defaults.transformRequest=[function(t){return angular.isObject(t)&&"[object File]"!==String(t)?e(t):t}]}]).run(["$ionicPlatform","$cordovaFile","$rootScope","$timeout",function(t,e,r,a){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),a(function(){r.$broadcast("check_version","close")},2e3)})}]).filter("unique",function(){return function(t,e){var r=[],a=[];return angular.forEach(t,function(t){var n=t[e];-1===a.indexOf(n)&&(a.push(n),r.push(t))}),r}}).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.landing",{url:"/landing",views:{menuContent:{templateUrl:"templates/landing.html"}}}).state("app.dashboard",{url:"/dashboard",views:{menuContent:{templateUrl:"templates/dashboard.html"}}}).state("app.createEnquiry",{url:"/createEnquiry",views:{menuContent:{templateUrl:"templates/enquiry/createEnquiry/createEnquiry.html"}}}).state("app.createNewEnquiry",{url:"/createNewEnquiry",views:{menuContent:{templateUrl:"templates/enquiry/createEnquiry/createNewEnquiry.html"}}}).state("app.add_personal_info",{url:"/add_personal_info",views:{menuContent:{templateUrl:"templates/enquiry/createEnquiry/add_personal_info.html"}}}).state("app.add_vehicle_info",{url:"/add_vehicle_info",views:{menuContent:{templateUrl:"templates/enquiry/createEnquiry/add_vehicle_info.html"}}}).state("app.enquiryList",{url:"/enquiryList",views:{menuContent:{templateUrl:"templates/enquiry/enquiryList.html"}}}).state("app.enquiryDetail",{url:"/enquiryDetail",views:{menuContent:{templateUrl:"templates/enquiry/enquiryDetail.html"}}}).state("app.followupList",{url:"/followupList",views:{menuContent:{templateUrl:"templates/followup/followupList.html"}}}).state("app.pendingFollowupList",{url:"/pendingFollowupList",views:{menuContent:{templateUrl:"templates/followup/pendingFollowupList.html"}}}).state("app.contactList",{url:"/contactList",views:{menuContent:{templateUrl:"templates/contact/contactList.html"}}}).state("app.contactDetail",{url:"/contactDetail",views:{menuContent:{templateUrl:"templates/contact/contactDetail.html"}}}).state("app.vehicleDetail",{url:"/vehicleDetail",views:{menuContent:{templateUrl:"templates/vehicle/vehicleDetail.html"}}}).state("app.searchFilter",{url:"/searchFilter",views:{menuContent:{templateUrl:"templates/popups/searchFilter.html"}}}).state("app.searchEnquiryList",{url:"/searchEnquiryList",views:{menuContent:{templateUrl:"templates/enquiry/searchEnquiry/searchEnquiryList.html"}}}),e.otherwise("/app/landing")}]);
angular.module("starter.controllers",[]).controller("AppCtrl",["$scope","$state","$ionicModal","$ionicPopup","$ionicHistory","$ionicScrollDelegate","$timeout","$ionicSideMenuDelegate","$ionicLoading","$ionicPlatform","generic_http_post_service","date_picker",function(e,o,t,a,i,l,r,n,s,c,d,u){e.headerButton={},e.OS={ANDROID:!0,IOS:!1,DESKTOP:!1},e.$on("$ionicView.enter",function(o){var t=i.currentView().stateId;"app.searchEnquiryList"==t?e.headerButton.showFilter=!0:e.headerButton.showFilter=!1}),c.registerBackButtonAction(function(o){var t=i.currentView().stateId;"app.dashboard"==t?backAsHome.trigger(function(){},function(){}):e.goBackScreen()},100),e.sessionVariable={},e.sessionVariable.temp_cont_enq={},e.sessionVariable.temp_enq={},e.sessionVariable.temp_cont={},e.search_filter={},e.InTesting=!1,e.mkey="vats",e.style={},e.validationClass=Object.freeze({ERROR:"ion-asterisk assertive",OK:"ion-checkmark balanced"}),e.style.opacity=Object.freeze({FULL:"opacity: 1;",ACTIVE:"opacity: 0.3;",LIGHT:"opacity: 0.5;"}),e.localStorageKeys=Object.freeze({LOGIN:"hero_dse_key",DISTRICT:"dse_district",TEHSIL:"dse_tehsil",VILLAGE:"dse_village",STATE:"dse_state",STATE_ID:"dse_state_id",DISTRICT_ID:"dse_district_id",TEHSIL_ID:"dse_tehsil_id",MAKE_MODEL:"dse_make_model",ALL_STATE:"dse_all_state",ALL_DISTRICT:"dse_all_district",USERNAME:"username",TEN_DAY_FOLLOW:"ten_day_follow"}),e.SaveLoginCredential=function(o){try{e.SaveInLocalStorage(e.localStorageKeys.LOGIN,o)}catch(t){alert(t)}},e.showAlertWindow=function(e){a.alert({title:e,okType:"positive"}).then(function(e){console.log("Your log ",e)})},e.showAlertWindow_Titled=function(e,o,t,i){a.alert({title:e,template:'<div align="center">'+o+"</div>",okText:null!=i?i:"OK",okType:"button-dark"}).then(function(e){null!=t&&void 0!=t&&t()})},e.testAlertWindow=function(o){e.InTesting&&alert(o)},e.doubleBack=function(){var e=i.viewHistory().views[i.viewHistory().backView.backViewId];i.viewHistory().forcedNav={viewId:e.viewId,navAction:"moveBack",navDirection:"back"},e&&e.go()},e.goBackScreen=function(){i.goBack()},e.clearCache=function(){i.clearCache()},e.clearCacheAndHistory=function(){i.clearCache(),i.clearHistory()},e.clearHistory=function(){i.clearHistory()},e.disableBack=function(){i.nextViewOptions({disableBack:!0})},e.enableBack=function(){i.nextViewOptions({disableBack:!1})},e.scrollTop=function(){l.scrollTop()},e.jumpTo=function(e){try{o.go(e)}catch(t){alert(t)}},e.jumpTo_cacheFalse=function(e){try{o.go(e,{cache:!1})}catch(t){alert(t)}},e.enableSideMenuDrag=function(){n.canDragContent(!0)},e.disableSideMenuDrag=function(){n.canDragContent(!1)},e.resizePage=function(){l.resize()},e.showLoader=function(e){s.show({template:'<ion-spinner icon="lines" class="spinner-energized" style="float: left;"></ion-spinner><span style="margin-left: 5px;">'+e+"</span>"})},e.hideLoader=function(){s.hide()},e.showToast=function(e){s.show({template:e,delay:500,duration:2e3})},e.showConfirm=function(e,o,t,i){a.confirm({title:e,template:o,okType:"button-assertive",cancelType:"button-dark"}).then(function(e){e?(console.log("You are sure"),i&&i(t)):console.log("You are not sure")})},e.SaveInLocalStorage=function(o,t){var a=rc4(e.mkey,t);window.localStorage.setItem(o,a.toString())},e.GetInLocalStorage=function(o){var t=window.localStorage.getItem(o),a=null;return t&&(a=rc4(e.mkey,window.localStorage.getItem(o))),a},e.RemoveInLocalStorage=function(e){window.localStorage.removeItem(e)},e.askLogout=function(){e.showConfirm("Do you really want to logout?","This may discard your pending changes. If you still want to logout then press yes otherwise no",null,e.doLogout)},e.doLogout=function(){e.disableBack(),e.jumpTo("app.landing"),e.clearHistory(),e.sessionVariable={},e.RemoveInLocalStorage(e.localStorageKeys.LOGIN),e.RemoveInLocalStorage(e.localStorageKeys.DISTRICT),e.RemoveInLocalStorage(e.localStorageKeys.TEHSIL),e.RemoveInLocalStorage(e.localStorageKeys.VILLAGE),e.RemoveInLocalStorage(e.localStorageKeys.STATE),e.RemoveInLocalStorage(e.localStorageKeys.STATE_ID),e.RemoveInLocalStorage(e.localStorageKeys.DISTRICT_ID),e.RemoveInLocalStorage(e.localStorageKeys.TEHSIL_ID),e.RemoveInLocalStorage(e.localStorageKeys.MAKE_MODEL),e.RemoveInLocalStorage(e.localStorageKeys.ALL_STATE),e.RemoveInLocalStorage(e.localStorageKeys.ALL_DISTRICT),e.RemoveInLocalStorage(e.localStorageKeys.USERNAME),e.RemoveInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW)},e.get_district=function(o){return e.sessionVariable.login_data.state_id?(e.showLoader(""),e.requestData={},e.requestData.state_id=o.split(",")[0],void d.getDetails(d.getServices().GET_DISTRICT,e.requestData,e.get_district_callback)):void e.showAlertWindow("Sorry","Please select a state first")},e.get_district_callback=function(o){e.hideLoader(),o.result!=[]?(e.sessionVariable.district_list=o.district,e.SaveInLocalStorage(e.localStorageKeys.DISTRICT,JSON.stringify(o))):e.showAlertWindow_Titled("Error",o.respDescription,null,null)},e.get_tehsil=function(){return e.sessionVariable.login_data.district_id?(e.showLoader(""),e.requestData={},e.requestData.district_id=e.sessionVariable.login_data.district_id.split(",")[0],void d.getDetails(d.getServices().GET_TEHSIL,e.requestData,e.get_tehsil_callback)):void e.showAlertWindow("Sorry","Please select a district first")},e.get_tehsil_callback=function(o){e.hideLoader(),o.result!=[]?(e.sessionVariable.tehsil_list=o.tehsil,e.SaveInLocalStorage(e.localStorageKeys.TEHSIL,JSON.stringify(o))):e.showAlertWindow_Titled("Error",o.respDescription,null,null)},e.get_village=function(){return e.sessionVariable.login_data.district_id?(e.showLoader(""),e.requestData={},e.requestData.tehsil_id=e.sessionVariable.login_data.tehsil_id.split(",")[0],void d.getDetails(d.getServices().GET_VILLAGE,e.requestData,e.get_village_callback)):void e.showAlertWindow("Sorry","Please select a tehsil first")},e.get_village_callback=function(o){e.hideLoader(),o.result!=[]?(e.sessionVariable.village_list=o.village,e.SaveInLocalStorage(e.localStorageKeys.TEHSIL_ID,e.sessionVariable.login_data.tehsil_id)):e.showAlertWindow_Titled("Error",o.respDescription,null,null)},e.get_fullstate_data=function(){return e.sessionVariable.login_data.state_id?(e.showLoader(""),e.requestData={},e.requestData.state_id=e.sessionVariable.login_data.state_id.split(",")[0],void d.getDetails(d.getServices().GET_STATE_DATA,e.requestData,e.get_fullstate_data_callback)):void e.showAlertWindow("Sorry","Please select a state first")},e.get_fullstate_data_callback=function(o){e.hideLoader(),o.result!=[]?(e.sessionVariable.allStates=o,e.SaveInLocalStorage(e.localStorageKeys.ALL_STATE,JSON.stringify(o))):e.showAlertWindow_Titled("Error",o.respDescription,null,null)},e.get_full_district_data=function(){return e.sessionVariable.login_data.district_id?(e.showLoader(""),e.requestData={},e.requestData.district_id=e.sessionVariable.login_data.district_id.split(",")[0],void d.getDetails(d.getServices().GET_DISTRICT_DATA,e.requestData,e.get_full_district_data_callback)):void e.showAlertWindow("Sorry","Please select a district first")},e.get_full_district_data_callback=function(o){e.hideLoader(),o.result!=[]?(e.sessionVariable.allDistrict=o,e.sessionVariable.tehsil_list=o.tehsil,e.sessionVariable.village_list=o.village,e.SaveInLocalStorage(e.localStorageKeys.ALL_DISTRICT,JSON.stringify(o))):e.showAlertWindow_Titled("Error",o.respDescription,null,null)},e.get_make_model=function(){e.showLoader(""),e.requestData={},e.requestData.user_id=e.sessionVariable.username,d.getDetails(d.getServices().BIKE_MAKE_MODEL,e.requestData,e.get_make_model_callback)},e.get_make_model_callback=function(o){e.hideLoader(),o.result!=[]?(e.sessionVariable.make_model_list=o,e.sessionVariable.make_list=o.make,e.sessionVariable.model_list=o.model,e.sessionVariable.model_interested=o.model_interested,e.SaveInLocalStorage(e.localStorageKeys.MAKE_MODEL,JSON.stringify(o))):e.showAlertWindow_Titled("Error",o.respDescription,null,null)},e.showCloseEnquiryModal=function(o){o&&(e.sessionVariable.selected_enquiry=o),e.showModal("templates/popups/closeEnquiryModel.html")},e.showFollowupEnquiryModal=function(o){o&&(e.sessionVariable.selected_enquiry=o),e.showModal("templates/popups/followupEnquiryPopup.html")},e.pickDate=function(){var o=!0,t=!1;u.getDate("date",e.pickDob_callback,o,t)},e.pickDob_callback=function(o){e.reg.dob=o.currDate},e.isNumberKey=function(e){var o=e.which?e.which:event.keyCode;return!(46!=o&&o>31&&(48>o||o>57))},e.ConvertBoolToNumber=function(e){var o=0;return e&&(o=1),o},e.getValueInJson=function(e,o,t,a){var i="",l=!0;return angular.forEach(e,function(e,r){l&&e[t]==o&&(i=e[a],l=!1)}),i},e.showModal=function(o){t.fromTemplateUrl(o,{scope:e,animation:"slide-in-up"}).then(function(o){e.modal=o,e.modal.show()})},e.closeModal=function(){e.modal.hide(),e.modal.remove()},e.call=function(o){e.showConfirm("Are you sure?","Call this number<br/>"+o,o,e.call_callback)},e.call_callback=function(e){launchCall(e)},e.email=function(o){e.showConfirm("Are you sure?","Email this to<br/>"+o,o,e.email_callback)},e.email_callback=function(e){launchMail(e)},e.$on("check_version",function(o,t){e.check_version()}),e.check_version=function(){e.requestData={},e.requestData.version=AppVersion.version,e.sessionVariable.version=AppVersion.version,d.getDetails(d.getServices().CHECK_VERSION,e.requestData,e.check_version_callback),console.log("current apk version : "+AppVersion.version)},e.version={},e.check_version_callback=function(o){try{if(e.version=o,console.log("current apk version : "+AppVersion.version+", New version : "+o.version),parseFloat(o.version)>parseFloat(AppVersion.version))return console.log("current apk version : "+AppVersion.version+", New version : "+o.version),void e.showAlertWindow_Titled("Update","New version of this app is available please update to continue",e.downloadNewVersion)}catch(t){alert(t)}},e.downloadNewVersion=function(){e.showLoader("Downloading pakage"),e.OS.ANDROID?(e.apkPath=e.version.path,e.directoryPath=cordova.file.externalRootDirectory+"Download/",window.resolveLocalFileSystemURL(e.directoryPath,e.fileDownload())):e.OS.IOS},e.fileDownload=function(){var o=new FileTransfer;e.apkPath=encodeURI(e.apkPath),console.log("download path : "+e.apkPath),console.log("directory path : "+e.directoryPath+"HeroDse.apk"),o.onprogress=function(o){try{if(o.lengthComputable){var t=Math.floor(o.loaded/o.total*100),a=t+"% Downloaded...";e.showLoader(a)}else e.showLoader("Downloading...")}catch(i){e.hideLoader(),alert(i)}},o.download(e.apkPath,e.directoryPath+"HeroDse.apk",function(o){e.installApk()},function(o){e.hideLoader(),e.showAlertWindow_Titled("Sorry","Your download failed."),console.log("download error source "+o.source),console.log("download error target "+o.target),console.log("upload error code"+o.code)},!0,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}}),e.installApk=function(){e.hideLoader(),cordova.plugins.fileOpener2.open(e.directoryPath+"HeroDse.apk","application/vnd.android.package-archive"),location.reload(!0)}}}]);
angular.module("starter.dashboard",[]).controller("dashboardCtrl",["$scope","generic_http_post_service","fileTransfer","$ionicPlatform",function(e,o,a,t){e.sessionVariable.search={},e.apkPath="",e.directoryPath="",e.menuList=[{name:"Enquiries",badge:1,icon:"icon ion-ios-list assertive",link:"app.enquiryList"},{name:"Followups",badge:3,icon:"icon ion-chatboxes balanced",link:"app.followupList"},{name:"Contacts",badge:0,icon:"icon ion-android-contacts positive",link:"app.contactList"}],e.init=function(){var o=null;try{o=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.MAKE_MODEL)),o?(e.sessionVariable.make_list=o.make,e.sessionVariable.model_list=o.model,e.sessionVariable.model_interested=o.model_interested):e.get_make_model()}catch(a){console.log("make model not found  "+a)}},e.fetch_contact=function(a){e.showLoader(""),e.requestData={},e.requestData.user_id=e.sessionVariable.username,e.requestData.dealer_code=e.sessionVariable.login_data.dealer_code,e.requestData.phn_no=e.sessionVariable.search.phone?e.sessionVariable.search.phone:"",e.requestData.reg_no=e.sessionVariable.search.regno?e.sessionVariable.search.regno:"",o.getDetails(o.getServices().FETCH_CONTACT,e.requestData,e.fetch_contact_callback)},e.fetch_contact_callback=function(o){e.hideLoader(),e.sessionVariable.temp_cont_enq={},e.sessionVariable.temp_cont_enq.mobile=e.sessionVariable.search.phone,1==o.success?(e.sessionVariable.contact_list=o,e.jumpTo("app.contactList")):0==o.success?(e.showAlertWindow_Titled("Error",o.failure_msg?o.failure_msg:""),e.sessionVariable.contact_list=void 0):(e.sessionVariable.contact_list=void 0,e.jumpTo("app.contactList"))},e.launchProductCatalogApp=function(){e.checkAppAvailability("com.ionicframework.gallapp343021")},e.checkAppAvailability=function(o){navigator.startApp.check(o,function(a){e.startApp(o)},function(a){e.downloadApp(o)})},e.startApp=function(o){e.SaveInLocalStorage("Dealer",e.sessionVariable.login_data.dealer_code),navigator.startApp.start(o,function(o){e.OS.ANDROID?navigator.startApp.start([["com.ionicframework.gallapp343021","com.ionicframework.gallapp343021.MainActivity"],[{dse_id:e.sessionVariable.username}]],function(e){console.log(e)},function(e){console.log(e)}):e.OS.IOS},function(e){})},e.downloadApp=function(o){e.showLoader("Downloading pakage"),e.OS.ANDROID?(e.apkPath="http://tab.hmcl.biz/HeroProduct/HeroProducts.apk",e.directoryPath=cordova.file.externalRootDirectory+"Download/",window.resolveLocalFileSystemURL(e.directoryPath,e.fileDownload())):e.OS.IOS},e.installApk=function(o,a){if(-1==o)alert(JSON.stringify(o)),e.hideLoader(),e.showAlertWindow_Titled("Error",a);else if(-2==o);else{alert("after successfully download "+JSON.stringify(o)),e.hideLoader();var t=o.nativeURL;cordova.plugins.fileOpener2.open(t,"application/vnd.android.package-archive")}},e.fileDownload=function(){var o=new FileTransfer;e.apkPath=encodeURI(e.apkPath),o.onprogress=function(o){try{if(o.lengthComputable){var a=Math.floor(o.loaded/o.total*100),t=a+"% Downloaded...";e.showLoader(t)}else e.showLoader("Downloading...")}catch(i){alert(i)}},o.download(e.apkPath,e.directoryPath+"HeroProducts.apk",function(o){e.installApk()},function(o){e.showAlertWindow_Titled("Sorry","Your download failed."),console.log("download error source "+o.source),console.log("download error target "+o.target),console.log("upload error code"+o.code)},!0,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}}),e.installApk=function(){e.hideLoader(),cordova.plugins.fileOpener2.open(e.directoryPath+"HeroProducts.apk","application/vnd.android.package-archive")}}}]);
angular.module("starter.landing",[]).controller("landingCtrl",["$scope","$cordovaDevice","$rootScope","generic_http_post_service",function(e,a,o,r){e.init=function(){var a=null;try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.STATE)),a&&(e.sessionVariable.username=e.GetInLocalStorage(e.localStorageKeys.USERNAME),e.doLogin_callback(a))}catch(o){console.log("init : "+o)}},e.doLogin=function(){try{if(!e.sessionVariable.username)return void e.showAlertWindow_Titled("Sorry","Please enter username or email-id");if(!e.sessionVariable.password)return void e.showAlertWindow_Titled("Sorry","Please enter password");e.showLoader("Logging in..."),e.requestData={},e.requestData.username=e.sessionVariable.username,e.requestData.password=e.sessionVariable.password,e.OS.DESKTOP?(e.requestData.version="1.0",e.requestData.imei="0"):(e.requestData.version=AppVersion.version,e.requestData.imei=a.getUUID()),r.getDetails(r.getServices().LOGIN,e.requestData,e.doLogin_callback)}catch(o){alert(o)}},e.doLogin_callback=function(a){e.hideLoader(),1==a.result?(e.sessionVariable.login_data=a,e.sessionVariable.state_list=a.state,e.sessionVariable.login_data.state_id=a.state_id,e.SaveInLocalStorage(e.localStorageKeys.STATE,JSON.stringify(a)),e.SaveInLocalStorage(e.localStorageKeys.STATE_ID,a.state_id),e.SaveInLocalStorage(e.localStorageKeys.USERNAME,e.sessionVariable.username),e.clearHistory(),e.disableBack(),e.jumpTo("app.dashboard")):e.showAlertWindow_Titled("Error",a.failure_msg,null,null)},e.showAppDetail=function(){try{var o="";o+="<p><b>Device id : <b>"+a.getUUID()+"</p>",o+="<p><b>version : <b>"+AppVersion.version+"   <b>Build : <b>"+AppVersion.build+"</p>",e.showAlertWindow_Titled("App Detail",o)}catch(r){alert(r)}}}]);
angular.module("starter.contactDetail",[]).controller("contactDetailCtrl",["$scope","$ionicPopup","$ionicModal","date_picker",function(i,t,n,o){i.arrayList={},i.init=function(){i.hasEnquiry=!1},i.checkCount=function(){i.hasEnquiry=!0},i.showDetail=function(t){i.sessionVariable.selected_enquiry=t,i.jumpTo("app.enquiryDetail")},i.$on("filterFollowups",function(t,n){try{"close"==n&&(i.hasEnquiry=!1),i.$digest()}catch(o){}})}]);
angular.module("starter.contactList",[]).controller("contactListCtrl",["$scope",function(t){t.arrayList=[],t.init=function(){},t.showDetail=function(o){t.sessionVariable.contact_list.selected_item=o,t.jumpTo("app.contactDetail")},t.$on("filterFollowups",function(o,i){t.$digest()})}]);
angular.module("starter.enquiryDetail",[]).controller("enquiryDetailCtrl",["$scope",function(o){o.$on("filterFollowups",function(e,l){"close"==l?o.goBackScreen():"follow"==l?o.$digest():o.$scope.showToast("oops! No action passed ")})}]);
angular.module("starter.enquiryList",[]).controller("enquiryListCtrl",["$scope",function(t){t.showDetail=function(){t.jumpTo("app.enquiryDetail")}}]);
angular.module("starter.followupList",[]).controller("followupListCtrl",["$scope","$ionicPopup","generic_http_post_service","date_picker",function(e,a,t,n){function r(){try{var a=void 0;2==e.search_filter.finance?a="Y":3==e.search_filter.finance&&(a="N");var t=[],r=n.convertDateToString(new Date,"yyyy-mm-dd");angular.forEach(e.sessionVariable.ten_days_followup.follow_up,function(a){var n=!0;r&&r!=e.convertFormatOfDate(a.FOLLOW_DATE)&&(n=!1),n&&t.push(a)}),e.arrayList.follow_up=t,e.dataRefreshing=!1}catch(o){alert(o)}}e.arrayList={},e.$on("filterFollowups",function(a,t){e.filterFollowups()}),e.showDetail=function(a){e.sessionVariable.selected_enquiry=a,e.jumpTo("app.enquiryDetail")},e.init=function(){e.dataRefreshing=!0,e.sessionVariable.ten_days_followup={},e.find_10_days_data()},e.find_10_days_data=function(){var a=null;try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW))}catch(t){}try{a?(e.sessionVariable.ten_days_followup=a,e.matchDate()?r():e.Fetch_10_days_Enquiry()):e.Fetch_10_days_Enquiry()}catch(t){alert(t)}},e.Fetch_10_days_Enquiry=function(){e.requestData={},e.requestData.user_id=e.sessionVariable.username,t.getDetails(t.getServices().GET_FOLLOW_UP,e.requestData,e.Fetch_10_days_Enquiry_callback)},e.matchDate=function(){var a=!1;try{if(e.sessionVariable.ten_days_followup.date){var t=n.convertDateToString(new Date,"mm/dd/yyyy");t==e.sessionVariable.ten_days_followup.date&&(a=!0)}}catch(r){}return a},e.Fetch_10_days_Enquiry_callback=function(a){e.dataRefreshing=!1,1==a.success?(e.SaveInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW,JSON.stringify(a)),e.sessionVariable.ten_days_followup={},e.sessionVariable.ten_days_followup=a,r()):e.showAlertWindow_Titled("Error",a.respDescription,null,null)},e.convertFormatOfDate=function(e){function a(e){return(""+e).length<2&&(e="0"+e),e}var t="",n=new Array("jan","feb","mar","apr","may","jun","jul","aug","sep","cct","nov","dec"),r=e.split("-"),o=new Date("20"+r[2],n.indexOf(r[1].toLowerCase()),r[0]);return t=o.getFullYear()+"-"+a(o.getMonth()+1)+"-"+a(o.getDate())}}]);
angular.module("starter.pendingFollowupList",[]).controller("pendingFollowupListCtrl",["$scope","$ionicPopup","generic_http_post_service","date_picker",function(e,a,t,s){e.arrayList={},e.$on("filterFollowups",function(a,t){e.filterFollowups()}),e.showDetail=function(a){e.sessionVariable.selected_enquiry=a,e.jumpTo("app.enquiryDetail")},e.init=function(){e.dataRefreshing=!0,e.sessionVariable.ten_days_followup={},e.find_10_days_data()},e.find_10_days_data=function(){var a=null;try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW))}catch(t){}try{a?(e.sessionVariable.ten_days_followup=a,e.matchDate()?(e.arrayList=a,e.dataRefreshing=!1):e.Fetch_10_days_Enquiry()):e.Fetch_10_days_Enquiry()}catch(t){alert(t)}},e.matchDate=function(){var a=!1;try{if(e.sessionVariable.ten_days_followup.date){var t=s.convertDateToString(new Date,"mm/dd/yyyy");t==e.sessionVariable.ten_days_followup.date&&(a=!0)}}catch(i){}return a},e.Fetch_10_days_Enquiry=function(){e.requestData={},e.requestData.user_id=e.sessionVariable.username,t.getDetails(t.getServices().GET_FOLLOW_UP,e.requestData,e.Fetch_10_days_Enquiry_callback)},e.Fetch_10_days_Enquiry_callback=function(a){e.dataRefreshing=!1,1==a.success?(e.SaveInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW,JSON.stringify(a)),e.sessionVariable.ten_days_followup=a,e.arrayList=a):e.showAlertWindow_Titled("Error",a.respDescription,null,null)}}]);
angular.module("starter.closeEnquiryModal",[]).controller("closeEnquiryModalCtrl",["$scope","$rootScope","generic_http_post_service",function(e,a,l){e.data={},e.init=function(){var a=null;try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.MAKE_MODEL)),a?(e.sessionVariable.make_list=a.make,e.sessionVariable.model_list=a.model,e.sessionVariable.model_interested=a.model_interested):e.get_make_model()}catch(l){console.log("closeEnquiryModal make_model_data : "+l)}},e.mainReason=["Others","Purchased from Own Dealership","Dropped the Idea","Purchased From Competition","Purchased From CoDealer"],e.subReason={Others:[{value:"Finance not available"},{value:"SKU Non-Availability"},{value:"Secondhand Purchase"},{value:"Others"},{value:"Exchange price not suitable"},{value:"Wrong Contact Number"}],"Purchased From CoDealer":[{value:"Better Finance"},{value:"Discount"},{value:"Better exchange value"},{value:"Proximity"},{value:"Others"},{value:"SKU Non-Availability"}],"Purchased From Competition":[{value:"Proximity"},{value:"SKU Non-Availability"},{value:"First preference"},{value:"Better Finance"},{value:"Others"},{value:"Discount"},{value:"Better exchange value"}]},e.onMainReasonSelect=function(e){},e.closeEnquiry=function(){return e.data.reason?(e.showLoader(""),e.requestData={},e.requestData=e.data,e.requestData.user_id=e.sessionVariable.username,e.requestData.dms_enquiry_id=e.sessionVariable.selected_enquiry.ENQUIRY_ID,e.data.existMake&&(e.requestData.existMake=e.data.existMake.split(",")[1]),void l.getDetails(l.getServices().SYNC_FOLLOW_UP,e.requestData,e.closeEnquiry_callback)):void e.showAlertWindow("Please select main reason")},e.closeEnquiry_callback=function(a){e.hideLoader(),1==a.success?(e.showAlertWindow_Titled("Success","Enquiry closed"),e.removeLocalEnquiry(),e.closeModal()):e.showAlertWindow_Titled("Error",a.respDescription,null,null)},e.removeLocalEnquiry=function(){var l=!0,o=0;try{e.sessionVariable.ten_days_followup&&angular.forEach(e.sessionVariable.ten_days_followup.follow_up,function(s,t){l&&(s.ENQUIRY_ID==e.sessionVariable.selected_enquiry.ENQUIRY_ID&&(e.sessionVariable.ten_days_followup.follow_up.splice(o,1),e.SaveInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW,JSON.stringify(e.sessionVariable.ten_days_followup)),a.$broadcast("filterFollowups","close"),l=!1),o++)}),l&&(o=0,angular.forEach(e.sessionVariable.contact_list.enquiry,function(s,t){l&&(s.ENQUIRY_ID==e.sessionVariable.selected_enquiry.ENQUIRY_ID&&(e.sessionVariable.contact_list.enquiry.splice(o,1),a.$broadcast("filterFollowups","close"),l=!1),o++)}))}catch(s){alert(s)}}}]);
angular.module("starter.followupEnquiryModal",[]).controller("followupEnquiryModalCtrl",["$scope","generic_http_post_service","date_picker","$rootScope",function(e,a,t,o){e.page={},e.init=function(){},e.pickDate=function(a){e.page.dateType=a,t.getDate("date",e.pickDate_callback)},e.pickDate_callback=function(a){"exp"==e.page.dateType?e.sessionVariable.selected_enquiry.EXPCTD_DT_PURCHASE=a.currDate:e.page.date=a.currDate},e.getDateWithMonthName=function(e){return t.getDateWithMonthName(e)},e.getFolDateWithMonthName=function(a){if(!a){var o=t.addDays(new Date,1);a=t.convertDateToString(o,"yyyy-mm-dd"),e.page.date=a}},e.followupEnquiry=function(){return e.page.date?(e.showLoader(""),e.requestData={},e.requestData=e.page,e.requestData.fol_date=t.getDateInFormat(e.page.date,"mm/dd/yyyy"),e.requestData.user_id=e.sessionVariable.username,e.requestData.dms_enquiry_id=e.sessionVariable.selected_enquiry.ENQUIRY_ID,void a.getDetails(a.getServices().SYNC_FOLLOW_UP,e.requestData,e.followupEnquiry_callback)):void e.showAlertWindow("Please select date")},e.followupEnquiry_callback=function(a){e.hideLoader(),1==a.success?(e.showAlertWindow_Titled("Success","Next followup scheduled"),e.updateEnquiry(),e.closeModal()):e.showAlertWindow_Titled("Error",a.respDescription,null,null)},e.updateEnquiry=function(){var a=!0,t=0;e.sessionVariable.ten_days_followup&&angular.forEach(e.sessionVariable.ten_days_followup.follow_up,function(r,n){a&&(r.ENQUIRY_ID==e.sessionVariable.selected_enquiry.ENQUIRY_ID&&(e.sessionVariable.ten_days_followup.follow_up[t].FOLLOW_DATE=e.convertFormatOfDate(e.page.date),e.sessionVariable.ten_days_followup.follow_up[t].FOLLOWUP_COMMENTS=e.page.remarks,e.SaveInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW,JSON.stringify(e.sessionVariable.ten_days_followup)),o.$broadcast("filterFollowups","follow"),a=!1),t++)}),a&&(t=0,angular.forEach(e.sessionVariable.contact_list.enquiry,function(r,n){a&&(r.ENQUIRY_ID==e.sessionVariable.selected_enquiry.ENQUIRY_ID&&(e.sessionVariable.contact_list.enquiry[t].FOLLOW_DATE=e.convertFormatOfDate(e.page.date),e.sessionVariable.contact_list.enquiry[t].FOLLOWUP_COMMENTS=e.page.remarks,o.$broadcast("filterFollowups","close"),a=!1),t++)}))},e.convertFormatOfDate=function(e){function a(e){return(""+e).length<2&&(e="0"+e),e}var t="",o=new Array("jan","feb","mar","apr","may","jun","jul","aug","sep","cct","nov","dec"),r=e.split("-"),n=new Date(r[0],parseInt(r[1])-1,r[2]);return t=a(n.getDate())+"-"+o[n.getMonth()]+"-"+n.getFullYear().toString()}}]);
angular.module("starter.searchFilter",[]).controller("searchFilterCtrl",["$scope","$timeout","date_picker",function(e,t,a){e.dateModel={EXP_FROM:1,EXP_TO:2,CRT_FROM:3,CRT_TO:4,NXT:5},e.default_filter=function(){},e.setFinance=function(t){e.search_filter.finance=t},e.setStatus=function(t){e.search_filter.status=t},e.pickDate=function(t){try{if(t==e.dateModel.EXP_FROM&&e.search_filter.IsExpDate)a.getDate("date",e.pickEXP_FROM_callback,!0);else if(t==e.dateModel.EXP_TO&&e.search_filter.IsExpDate)if(e.search_filter.EXP_FROM){var r=a.ConvertStringToDate(e.search_filter.EXP_FROM,"yyyy-mm-dd");a.getDate("date",e.pickEXP_TO_callback,!1,!1,r)}else e.showAlertWindow_Titled("oh oh!","Please select expiry from date first");else t==e.dateModel.CRT_FROM&&e.search_filter.IsCreateDate?a.getDate("date",e.pickCRT_FROM_callback,!0):t==e.dateModel.CRT_TO&&e.search_filter.IsCreateDate?e.search_filter.CRT_FROM?a.getDate("date",e.pickCRT_TO_callback,!1,!1,a.ConvertStringToDate(e.search_filter.CRT_FROM,"yyyy-mm-dd")):e.showAlertWindow_Titled("oh oh!","Please select expiry from date first"):t==e.dateModel.NXT&&e.search_filter.IsNextDate&&a.getDate("date",e.pickNXT_callback)}catch(c){alert(c)}},e.pickEXP_FROM_callback=function(t){e.search_filter.EXP_FROM=t.currDate},e.pickEXP_TO_callback=function(t){e.search_filter.EXP_TO=t.currDate},e.pickCRT_FROM_callback=function(t){e.search_filter.CRT_FROM=t.currDate},e.pickCRT_TO_callback=function(t){e.search_filter.CRT_TO=t.currDate},e.pickNXT_callback=function(t){e.search_filter.NXT=t.currDate},e.getDateWithMonthName=function(e){return a.getDateWithMonthName(e)},e.setSearchFilter=function(){e.jumpTo("app.searchEnquiryList")},e.clearSearchFilter=function(){e.search_filter={},e.search_filter.finance=1}}]);
var CryptoJS=CryptoJS||function(t,e){var r={},i=r.lib={},n=function(){},o=i.Base={extend:function(t){n.prototype=this;var e=new n;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,r=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var n=0;t>n;n++)e[i+n>>>2]|=(r[n>>>2]>>>24-8*(n%4)&255)<<24-8*((i+n)%4);else if(65535<r.length)for(n=0;t>n;n+=4)e[i+n>>>2]=r[n>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-8*(r%4),e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],i=0;e>i;i+=4)r.push(4294967296*t.random()|0);return new s.init(r,e)}}),c=r.enc={},a=c.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],i=0;t>i;i++){var n=e[i>>>2]>>>24-8*(i%4)&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],i=0;e>i;i+=2)r[i>>>3]|=parseInt(t.substr(i,2),16)<<24-4*(i%8);return new s.init(r,e/2)}},f=c.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],i=0;t>i;i++)r.push(String.fromCharCode(e[i>>>2]>>>24-8*(i%4)&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],i=0;e>i;i++)r[i>>>2]|=(255&t.charCodeAt(i))<<24-8*(i%4);return new s.init(r,e)}},h=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},u=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,i=r.words,n=r.sigBytes,o=this.blockSize,c=n/(4*o),c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);if(e=c*o,n=t.min(4*e,n),e){for(var a=0;e>a;a+=o)this._doProcessBlock(i,a);a=i.splice(0,e),r.sigBytes-=n}return new s.init(a,n)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=u.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new p.HMAC.init(t,r).finalize(e)}}});var p=r.algo={};return r}(Math);!function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,i=this._map;t.clamp(),t=[];for(var n=0;r>n;n+=3)for(var o=(e[n>>>2]>>>24-8*(n%4)&255)<<16|(e[n+1>>>2]>>>24-8*((n+1)%4)&255)<<8|e[n+2>>>2]>>>24-8*((n+2)%4)&255,s=0;4>s&&r>n+.75*s;s++)t.push(i.charAt(o>>>6*(3-s)&63));if(e=i.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,i=this._map,n=i.charAt(64);n&&(n=t.indexOf(n),-1!=n&&(r=n));for(var n=[],o=0,s=0;r>s;s++)if(s%4){var c=i.indexOf(t.charAt(s-1))<<2*(s%4),a=i.indexOf(t.charAt(s))>>>6-2*(s%4);n[o>>>2]|=(c|a)<<24-8*(o%4),o++}return e.create(n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,r,i,n,o,s){return t=t+(e&r|~e&i)+n+s,(t<<o|t>>>32-o)+e}function r(t,e,r,i,n,o,s){return t=t+(e&i|r&~i)+n+s,(t<<o|t>>>32-o)+e}function i(t,e,r,i,n,o,s){return t=t+(e^r^i)+n+s,(t<<o|t>>>32-o)+e}function n(t,e,r,i,n,o,s){return t=t+(r^(e|~i))+n+s,(t<<o|t>>>32-o)+e}for(var o=CryptoJS,s=o.lib,c=s.WordArray,a=s.Hasher,s=o.algo,f=[],h=0;64>h;h++)f[h]=4294967296*t.abs(t.sin(h+1))|0;s=s.MD5=a.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,o){for(var s=0;16>s;s++){var c=o+s,a=t[c];t[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,c=t[o+0],a=t[o+1],h=t[o+2],u=t[o+3],p=t[o+4],d=t[o+5],l=t[o+6],y=t[o+7],_=t[o+8],v=t[o+9],g=t[o+10],B=t[o+11],x=t[o+12],S=t[o+13],k=t[o+14],m=t[o+15],z=s[0],C=s[1],w=s[2],D=s[3],z=e(z,C,w,D,c,7,f[0]),D=e(D,z,C,w,a,12,f[1]),w=e(w,D,z,C,h,17,f[2]),C=e(C,w,D,z,u,22,f[3]),z=e(z,C,w,D,p,7,f[4]),D=e(D,z,C,w,d,12,f[5]),w=e(w,D,z,C,l,17,f[6]),C=e(C,w,D,z,y,22,f[7]),z=e(z,C,w,D,_,7,f[8]),D=e(D,z,C,w,v,12,f[9]),w=e(w,D,z,C,g,17,f[10]),C=e(C,w,D,z,B,22,f[11]),z=e(z,C,w,D,x,7,f[12]),D=e(D,z,C,w,S,12,f[13]),w=e(w,D,z,C,k,17,f[14]),C=e(C,w,D,z,m,22,f[15]),z=r(z,C,w,D,a,5,f[16]),D=r(D,z,C,w,l,9,f[17]),w=r(w,D,z,C,B,14,f[18]),C=r(C,w,D,z,c,20,f[19]),z=r(z,C,w,D,d,5,f[20]),D=r(D,z,C,w,g,9,f[21]),w=r(w,D,z,C,m,14,f[22]),C=r(C,w,D,z,p,20,f[23]),z=r(z,C,w,D,v,5,f[24]),D=r(D,z,C,w,k,9,f[25]),w=r(w,D,z,C,u,14,f[26]),C=r(C,w,D,z,_,20,f[27]),z=r(z,C,w,D,S,5,f[28]),D=r(D,z,C,w,h,9,f[29]),w=r(w,D,z,C,y,14,f[30]),C=r(C,w,D,z,x,20,f[31]),z=i(z,C,w,D,d,4,f[32]),D=i(D,z,C,w,_,11,f[33]),w=i(w,D,z,C,B,16,f[34]),C=i(C,w,D,z,k,23,f[35]),z=i(z,C,w,D,a,4,f[36]),D=i(D,z,C,w,p,11,f[37]),w=i(w,D,z,C,y,16,f[38]),C=i(C,w,D,z,g,23,f[39]),z=i(z,C,w,D,S,4,f[40]),D=i(D,z,C,w,c,11,f[41]),w=i(w,D,z,C,u,16,f[42]),C=i(C,w,D,z,l,23,f[43]),z=i(z,C,w,D,v,4,f[44]),D=i(D,z,C,w,x,11,f[45]),w=i(w,D,z,C,m,16,f[46]),C=i(C,w,D,z,h,23,f[47]),z=n(z,C,w,D,c,6,f[48]),D=n(D,z,C,w,y,10,f[49]),w=n(w,D,z,C,k,15,f[50]),C=n(C,w,D,z,d,21,f[51]),z=n(z,C,w,D,x,6,f[52]),D=n(D,z,C,w,u,10,f[53]),w=n(w,D,z,C,g,15,f[54]),C=n(C,w,D,z,a,21,f[55]),z=n(z,C,w,D,_,6,f[56]),D=n(D,z,C,w,m,10,f[57]),w=n(w,D,z,C,l,15,f[58]),C=n(C,w,D,z,S,21,f[59]),z=n(z,C,w,D,p,6,f[60]),D=n(D,z,C,w,B,10,f[61]),w=n(w,D,z,C,h,15,f[62]),C=n(C,w,D,z,v,21,f[63]);s[0]=s[0]+z|0,s[1]=s[1]+C|0,s[2]=s[2]+w|0,s[3]=s[3]+D|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var o=t.floor(i/4294967296);for(r[(n+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[(n+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(r.length+1),this._process(),e=this._hash,r=e.words,i=0;4>i;i++)n=r[i],r[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),o.MD5=a._createHelper(s),o.HmacMD5=a._createHmacHelper(s)}(Math),function(){var t=CryptoJS,e=t.lib,r=e.Base,i=e.WordArray,e=t.algo,n=e.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),s=o.words,c=r.keySize,r=r.iterations;s.length<c;){a&&n.update(a);var a=n.update(t).finalize(e);n.reset();for(var f=1;r>f;f++)a=n.finalize(a),n.reset();o.concat(a)}return o.sigBytes=4*c,o}});t.EvpKDF=function(t,e,r){return n.create(r).compute(t,e)}}(),CryptoJS.lib.Cipher||function(t){var e=CryptoJS,r=e.lib,i=r.Base,n=r.WordArray,o=r.BufferedBlockAlgorithm,s=e.enc.Base64,c=e.algo.EvpKDF,a=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,r,i){return("string"==typeof r?l:d).encrypt(t,e,r,i)},decrypt:function(e,r,i){return("string"==typeof r?l:d).decrypt(t,e,r,i)}}}});r.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=e.mode={},h=function(e,r,i){var n=this._iv;n?this._iv=t:n=this._prevBlock;for(var o=0;i>o;o++)e[r+o]^=n[o]},u=(r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();u.Encryptor=u.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;h.call(this,t,e,i),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),u.Decryptor=u.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,n=t.slice(e,e+i);r.decryptBlock(t,e),h.call(this,t,e,i),this._prevBlock=n}}),f=f.CBC=u,u=(e.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,r=r-t.sigBytes%r,i=r<<24|r<<16|r<<8|r,o=[],s=0;r>s;s+=4)o.push(i);r=n.create(o,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=a.extend({cfg:a.cfg.extend({mode:f,padding:u}),reset:function(){a.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var p=r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?n.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){t=s.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var r=n.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:r})}},d=r.SerializableCipher=i.extend({cfg:i.extend({format:f}),encrypt:function(t,e,r,i){i=this.cfg.extend(i);var n=t.createEncryptor(r,i);return e=n.finalize(e),n=n.cfg,p.create({ciphertext:e,key:r,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,r,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(r,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,r,i){return i||(i=n.random(8)),t=c.create({keySize:e+r}).compute(t,i),r=n.create(t.words.slice(e),4*r),t.sigBytes=4*e,p.create({key:t,iv:r,salt:i})}},l=r.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:e}),encrypt:function(t,e,r,i){return i=this.cfg.extend(i),r=i.kdf.execute(r,t.keySize,t.ivSize),i.iv=r.iv,t=d.encrypt.call(this,t,e,r.key,i),t.mixIn(r),t},decrypt:function(t,e,r,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),r=i.kdf.execute(r,t.keySize,t.ivSize,e.salt),i.iv=r.iv,d.decrypt.call(this,t,e,r.key,i)}})}(),function(){for(var t=CryptoJS,e=t.lib.BlockCipher,r=t.algo,i=[],n=[],o=[],s=[],c=[],a=[],f=[],h=[],u=[],p=[],d=[],l=0;256>l;l++)d[l]=128>l?l<<1:l<<1^283;for(var y=0,_=0,l=0;256>l;l++){var v=_^_<<1^_<<2^_<<3^_<<4,v=v>>>8^255&v^99;i[y]=v,n[v]=y;var g=d[y],B=d[g],x=d[B],S=257*d[v]^16843008*v;o[y]=S<<24|S>>>8,s[y]=S<<16|S>>>16,c[y]=S<<8|S>>>24,a[y]=S,S=16843009*x^65537*B^257*g^16843008*y,f[v]=S<<24|S>>>8,h[v]=S<<16|S>>>16,u[v]=S<<8|S>>>24,p[v]=S,y?(y=g^d[d[d[x^g]]],_^=d[d[_]]):y=_=1}var k=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes/4,t=4*((this._nRounds=r+6)+1),n=this._keySchedule=[],o=0;t>o;o++)if(r>o)n[o]=e[o];else{var s=n[o-1];o%r?r>6&&4==o%r&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=k[o/r|0]<<24),n[o]=n[o-r]^s}for(e=this._invKeySchedule=[],r=0;t>r;r++)o=t-r,s=r%4?n[o]:n[o-4],e[r]=4>r||4>=o?s:f[i[s>>>24]]^h[i[s>>>16&255]]^u[i[s>>>8&255]]^p[i[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,s,c,a,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,f,h,u,p,n),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,i,n,o,s,c){for(var a=this._nRounds,f=t[e]^r[0],h=t[e+1]^r[1],u=t[e+2]^r[2],p=t[e+3]^r[3],d=4,l=1;a>l;l++)var y=i[f>>>24]^n[h>>>16&255]^o[u>>>8&255]^s[255&p]^r[d++],_=i[h>>>24]^n[u>>>16&255]^o[p>>>8&255]^s[255&f]^r[d++],v=i[u>>>24]^n[p>>>16&255]^o[f>>>8&255]^s[255&h]^r[d++],p=i[p>>>24]^n[f>>>16&255]^o[h>>>8&255]^s[255&u]^r[d++],f=y,h=_,u=v;y=(c[f>>>24]<<24|c[h>>>16&255]<<16|c[u>>>8&255]<<8|c[255&p])^r[d++],_=(c[h>>>24]<<24|c[u>>>16&255]<<16|c[p>>>8&255]<<8|c[255&f])^r[d++],v=(c[u>>>24]<<24|c[p>>>16&255]<<16|c[f>>>8&255]<<8|c[255&h])^r[d++],p=(c[p>>>24]<<24|c[f>>>16&255]<<16|c[h>>>8&255]<<8|c[255&u])^r[d++],t[e]=y,t[e+1]=_,t[e+2]=v,t[e+3]=p},keySize:8});t.AES=e._createHelper(r)}();
var CryptoJSAesJson={stringify:function(r){var t={ct:r.ciphertext.toString(CryptoJS.enc.Base64)};return r.iv&&(t.iv=r.iv.toString()),r.salt&&(t.s=r.salt.toString()),JSON.stringify(t)},parse:function(r){var t=JSON.parse(r),e=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(t.ct)});return t.iv&&(e.iv=CryptoJS.enc.Hex.parse(t.iv)),t.s&&(e.salt=CryptoJS.enc.Hex.parse(t.s)),e}};
"use.strict";angular.module("utils.date_picker",[]).factory("date_picker",["$cordovaDatePicker",function(t){function e(e,r,a,u,o,l){try{a=void 0!=a?a:!0,u=void 0!=u?u:!0,a||null==o&&(o=new Date-0),u||null==l&&(l=new Date-0);var i={date:new Date,mode:e,minDate:o,maxDate:l,allowOldDates:a,allowFutureDates:u,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"};t.show(i).then(function(t){t=n(t),r(t)})}catch(y){alert(y),r(null,y)}}function n(t){try{var e={};e.currDate=t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate());var n,a;t.getHours()>12?(n=t.getHours()-12,a="PM"):(n=t.getHours(),a="AM"),e.currTime=r(n)+":"+r(t.getMinutes())+" "+a}catch(u){alert(u)}return e}function r(t){return(""+t).length<2&&(t="0"+t),t}function a(t){var e="";if(!t||""==t)return e;var n=t.split("-"),r=new Date(n[0],n[1]-1,n[2]);return e=g[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear()}function u(t,e){var n="";return"dd/mm/yyyy"==e?n=r(t.getDate())+"/"+r(t.getMonth()+1)+"/"+t.getFullYear():"mm/dd/yyyy"==e?n=r(t.getMonth()+1)+"/"+r(t.getDate())+"/"+t.getFullYear():"yyyy-mm-dd"==e&&(n=t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())),n}function o(t,e){var n=null;try{var r;"dd/mm/yyyy"==e?(r=t.split("/"),n=new Date(r[2],parseInt(r[1])-1,r[0])):"mm/dd/yyyy"==e?(r=t.split("/"),n=new Date(r[2],parseInt(r[0])-1,r[1])):"yyyy-mm-dd"==e&&(r=t.split("-"),n=new Date(r[0],parseInt(r[1])-1,r[2]))}catch(a){alert(a)}return n}function l(t,e){var n="";if(!t)return n;var a=t.split("-"),u=new Date(a[0],a[1],a[2]);return"dd/mm/yyyy"==e?n=r(u.getDate())+"/"+r(u.getMonth())+"/"+u.getFullYear():"mm/dd/yyyy"==e?n=r(u.getMonth())+"/"+r(u.getDate())+"/"+u.getFullYear():"yyyy-mm-dd"==e&&(n=u.getFullYear()+"-"+r(u.getMonth())+"-"+r(u.getDate())),n}function i(t,e,n){var r=new Date(n,e,t),a=new Date,u=a-r,o=Math.floor(u/31536e6);return o}function y(t,e){return new Date(t.getTime()+24*e*60*60*1e3)}function c(t,e){var n=0;try{var r=t.split("-"),a=e.split("-"),u=new Date(r[0],parseInt(r[1])-1,r[2]),o=new Date(a[0],parseInt(a[1])-1,a[2]);o>u?n=1:u>o?n=2:u==o&&(n=3)}catch(l){}return n}var g=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");return{getDate:function(t,n,r,a,u,o){e(t,n,r,a,u,o)},getDateWithMonthName:function(t){return a(t)},getDateInFormat:function(t,e){return l(t,e)},getAge:function(t,e,n){return i(t,e,n)},convertDateToString:function(t,e){return u(t,e)},ConvertStringToDate:function(t,e){return o(t,e)},addDays:function(t,e){return y(t,e)},isGreaterDate:function(t,e){return c(t,e)}}}]);
"use.strict";angular.module("utils.fileTransfer",[]).factory("fileTransfer",["$cordovaFileTransfer","$cordovaFile",function(t,e){function n(t,n,o,i,c){o=n.substring(n.lastIndexOf("/")),e.checkDir(cordova.file.dataDirectory,"product_app_dir").then(function(e){console.debug("directory created "+JSON.stringify(e)),u=e.nativeURL,r(t,n,u+o,i,c)},function(a){e.createDir(cordova.file.dataDirectory,"product_app_dir",!1).then(function(e){console.debug("directory found "+JSON.stringify(e)),u=e.nativeURL,r(t,n,u+o,i,c)},function(e){console.debug(JSON.stringify(e)),t(-1,e)})})}function o(t,e,n,o){function r(t){alert("File System Fail: "+t.target.error.code)}window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(i){i.root.getDirectory(n,{create:!0,exclusive:!1},function(n){alert("directory created   "+JSON.stringify(n)),console.log("Directory has been created"),c(t,e,n,o)},r)},r)}function r(e,n,o,r,i){try{if(alert("url  "+n),null==n)return void e(-1,"parameters not supplied correctly !!");alert("targetPath  "+o),t.download(n,o).then(function(t){console.debug("Success "+JSON.stringify(t)),e(t)},function(t){console.debug(JSON.stringify(t)),e(-1,t)},function(t){var n=t.loaded/t.total*100;e(-2,n)})}catch(c){e(-1,c)}}function i(t,e,n,r){o(t,e,n,r)}function c(t,e,n,o){try{var i=encodeURI(e);r(t,i,n.nativeURL+"/"+o)}catch(c){alert("fileSystem"+c)}}function a(e,n,o,r){try{t.upload(n,o,r).then(function(t){e(t)},function(t){e(-1,t)},function(t){var n=t.loaded/t.total*100;e(-2,n)})}catch(i){e(-1,i)}}var u="";return{downloadFile:function(t,e,o,r){n(t,e,o,r,!0)},uploadFile:function(t,e,n,o){a(t,e,n,o)},downloadInOuterDirectory:function(t,e,n,o){i(t,e,n,o)}}}]);
function showMap(e){window.open("http://maps.google.com/?q="+e,"_system")}function launchMail(e){window.location.href="mailto:"+e+"?subject="}function launchCall(e){alert(e),window.location.href="tel:"+e}function scope_search(){$scope.listScope=angular.element(document.querySelector("[ng-controller=MyDropList]")).scope();var e=angular.element(document.querySelector("#outside")).scope();e.$apply(function(){e.msg="Superhero"})}function getController(e){var r=angular.element(document.querySelector("[ng-controller="+e+"]")).scope();return r}function getJsonKey(e){return Object.keys(e)}function closeKeyboard(){IsMobileDevice()&&cordova.plugins.Keyboard.close()}function IsMobileDevice(){var e=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0)}function launchInAppBrowser(e){launchInAppBrowserWithZoom(e)}function launchInAppBrowserWithZoom(e){inAppBrowserbRef=window.open(e,"_blank","EnableViewPortScale=yes")}function inAppBrowserbLoadStart(e){alert(e.type+" - "+e.url),msg="please wait ..";try{spinnerplugin.show()}catch(r){alert("sdds"+r)}}function inAppBrowserbLoadStop(e){alert(e.type+" - "+e.url);try{spinnerplugin.hide()}catch(r){alert("sdds"+r)}}function inAppBrowserbLoadError(e){navigator.notification.activityStop(),alert(e.type+" - "+e.message)}function inAppBrowserbClose(e){alert(e.type),inAppBrowserbRef.removeEventListener("loadstart",inAppBrowserbLoadStart),inAppBrowserbRef.removeEventListener("loadstop",inAppBrowserbLoadStop),inAppBrowserbRef.removeEventListener("loaderror",inAppBrowserbLoadError),inAppBrowserbRef.removeEventListener("exit",inAppBrowserbClose)}function validateEmail(e){var r=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return r.test(e)}function IsValidPhoneNumber(e){var r=/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;return!!e.match(r)}function GA_track_screen(e){try{}catch(r){}}function GA_track_event(e,r,o,n){try{OS.IOS?sendEvent("webservice",e,"success",1):sendEvent("webservice",e,r,1)}catch(t){}}function scrollTop(){$rootScope.scrollTop()}function rc4(e,r){for(var o,n=[],t=0,i="",a=0;256>a;a++)n[a]=a;for(a=0;256>a;a++)t=(t+n[a]+e.charCodeAt(a%e.length))%256,o=n[a],n[a]=n[t],n[t]=o;a=0,t=0;for(var c=0;c<r.length;c++)a=(a+1)%256,t=(t+n[a])%256,o=n[a],n[a]=n[t],n[t]=o,i+=String.fromCharCode(r.charCodeAt(c)^n[(n[a]+n[t])%256]);return i}var setLat,setLon,_intentAddAppointment=!1,inAppBrowserbRef;
"use.strict";angular.module("utils.http_post",[]).factory("generic_http_post_service",["$http","$timeout",function(t,e){var p="http://tab.hmcl.biz/",r="dse_app_UAT/",_=Object.freeze({LOGIN:p+r+"login.php",GET_DISTRICT:p+r+"get_district.php",GET_TEHSIL:p+r+"get_tehsil.php",GET_VILLAGE:p+r+"get_village.php",BIKE_MAKE_MODEL:p+r+"bike_make_model.php",GET_DISTRICT_DATA:p+r+"get_district_data.php",GET_STATE_DATA:p+r+"get_state_data.php",LATLONG:p+r+"latlong.php",FETCH_CONTACT:p+r+"fetch_contact.php",SYNC_RECORDS:p+r+"syncRecords.php",SYNC_FOLLOW_UP:p+r+"sync_follow_up.php",GET_FOLLOW_UP:p+r+"get_follow_up.php",CHECK_VERSION:p+r+"check_version.php"}),o={success:0,failure_title:"Error",failure_msg:"Something went wrong",error_code:101},c="punar",i=!1;return{getServices:function(){return _},getDetails:function(e,p,r){i=!0;var _={},c=CryptoJS.AES.encrypt(JSON.stringify(JSON.stringify(p)),"dse",{format:CryptoJSAesJson}).toString();_.data=c,t.post(e,_).success(function(t,e,p,_){i=!1;try{}catch(o){}r(t)}).error(function(t,e,p,_){i=!1,r(o)})},getDetails_httpget:function(e,p,r){i=!0,e+="?",e+="data="+rc4(c,"hello dsc"),t.get(e,{timeout:2e4}).success(function(t,e,p,_){i=!1,r(t)}).error(function(t,e,p,_){i=!1,r(o)})}}}]);
angular.module("ion-fab-button",[]).directive("fabButton",function(){function a(a){return angular.isDefined(a.href)||angular.isDefined(a.ngHref)}function e(e,n){return a(n)?'<a class="fab-button" ng-transclude></a>':'<button class="fab-button" ng-transclude></button>'}function n(a,e,n){var t="#"+n.targetId,l=angular.element(document.querySelector(t)),r=0;l.bind("scroll",function(a){r<a.detail.scrollTop&&(r=a.detail.scrollTop,e.removeClass("fadeInUp animated"),e.addClass("fadeOutDown animated")),r>a.detail.scrollTop&&(r=a.detail.scrollTop,e.removeClass("fadeOutDown animated"),e.addClass("fadeInUp animated"))})}return{restrict:"E",replace:!0,transclude:!0,template:e,link:n}});
angular.module("starter.vehicleDetail",[]).controller("vehicleDetailCtrl",["$scope",function(e){}]);
angular.module("starter.add_personal_info",[]).controller("add_personal_infoCtrl",["$scope","date_picker","generic_http_post_service",function(e,a,o){e.data={},e.data.age="dd-mm-yyyy",e.selectedModel="",e.pickDate=function(o){e.selectedModel=o,a.getDate("date",e.pickDate_callback)},e.pickDate_callback=function(a){"age"==e.selectedModel&&(e.data.age=a.currDate)},e.pickTime=function(){a.getDate("time",e.pickTime_callback)},e.getDateWithMonthName=function(e){return a.getDateWithMonthName(e)},e.init=function(){e.showLoader("");try{e.showLoader("Please wait...");var a=null,o=null,t=null;try{t=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.DISTRICT))}catch(l){console.log("make model not found  "+l),e.hideLoader()}if(t){e.sessionVariable.district_list=t.district,e.sessionVariable.login_data.district_id=e.GetInLocalStorage(e.localStorageKeys.DISTRICT_ID);try{o=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.ALL_DISTRICT)),o&&(e.sessionVariable.tehsil_list=o.tehsil,e.sessionVariable.village_list=o.village)}catch(l){console.log("make model not found  "+l),e.hideLoader()}}else e.get_district(e.sessionVariable.login_data.state_id);try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.MAKE_MODEL))}catch(l){console.log("make model not found  "+l),e.hideLoader()}a?(e.sessionVariable.make_list=a.make,e.sessionVariable.model_list=a.model,e.sessionVariable.model_interested=a.model_interested):e.get_make_model(),e.hideLoader()}catch(l){console.log("make model not found  "+l),e.hideLoader()}},e.onStateChange=function(){e.showConfirm("Are you sure","Do you really want to change your district?",null,e.onStateChange_callback)},e.onStateChange_callback=function(){e.RemoveInLocalStorage(e.localStorageKeys.TEHSIL),e.RemoveInLocalStorage(e.localStorageKeys.VILLAGE),e.RemoveInLocalStorage(e.localStorageKeys.STATE_ID),e.RemoveInLocalStorage(e.localStorageKeys.DISTRICT_ID),e.RemoveInLocalStorage(e.localStorageKeys.TEHSIL_ID),e.sessionVariable.login_data.district_id=void 0,e.sessionVariable.login_data.tehsil_id=void 0;var a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.STATE));a.state_id=e.sessionVariable.login_data.state_id,e.SaveInLocalStorage(e.localStorageKeys.STATE,JSON.stringify(a)),e.get_district(e.sessionVariable.login_data.state_id.split(",")[0])},e.onDistrictChange=function(){e.showConfirm("Are you sure","Do you really want to change your district?",null,e.onDistrictChange_callback)},e.onDistrictChange_callback=function(){e.SaveInLocalStorage(e.localStorageKeys.DISTRICT_ID,e.sessionVariable.login_data.district_id),e.RemoveInLocalStorage(e.localStorageKeys.VILLAGE),e.RemoveInLocalStorage(e.localStorageKeys.TEHSIL_ID),e.sessionVariable.login_data.tehsil_id=void 0,e.get_full_district_data()},e.onTehsilChange=function(){},e.checkNumberLength=function(a){var o=""+e.sessionVariable.temp_cont_enq.age;2==o.length&&a.preventDefault()},e.saveTempPerInfo=function(){return e.sessionVariable.temp_cont_enq.fname?e.sessionVariable.temp_cont_enq.lname?e.sessionVariable.temp_cont_enq.age?e.sessionVariable.temp_cont_enq.gender?e.sessionVariable.temp_cont_enq.mobile?e.sessionVariable.login_data.state_id?e.sessionVariable.login_data.district_id?e.sessionVariable.login_data.tehsil_id?e.sessionVariable.login_data.village_id?void e.jumpTo("app.createEnquiry"):void e.showAlertWindow_Titled("Error","Please select village"):void e.showAlertWindow_Titled("Error","Please select tehsil"):void e.showAlertWindow_Titled("Error","Please select district"):void e.showAlertWindow_Titled("Error","Please select state"):void e.showAlertWindow_Titled("Error","Please enter mobile"):void e.showAlertWindow_Titled("Error","Please select gender"):void e.showAlertWindow_Titled("Error","Please enter age"):void e.showAlertWindow_Titled("Error","Please enter last name"):void e.showAlertWindow_Titled("Error","Please enter first name")}}]);
angular.module("starter.addVehicleInfo",[]).controller("addVehicleInfoCtrl",["$scope",function(e){e.saveTempVehicle=function(){e.showAlertWindow_Titled("Success","Enquiry has been created successfully",e.after_saveTempVehicle)},e.after_saveTempVehicle=function(){e.disableBack(),e.jumpTo("app.dashboard")},e.onExistVeh_Change=function(){},e.onExistMake_Change=function(){},e.onExistModel_Change=function(){}}]);
angular.module("starter.createEnquiry",[]).controller("createEnquiryCtrl",["$scope","date_picker","generic_http_post_service",function(e,a,t){e.sessionVariable.createEnquiry={},e.init=function(){var a=null;try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.MAKE_MODEL)),a?(e.sessionVariable.make_list=a.make,e.sessionVariable.model_list=a.model,e.sessionVariable.model_interested=a.model_interested):e.get_make_model()}catch(t){console.log("make model not found  "+t),alert(t)}},e.veh_type_list=[{id:1,type:"Two Wheeler"},{id:2,type:"Four wheeler"},{id:3,type:"First Time Buyer"}],e.selectedModel="",e.pickDate=function(t){e.selectedModel=t,a.getDate("date",e.pickDate_callback,!1)},e.pickDate_callback=function(a){"exp"==e.selectedModel?e.sessionVariable.temp_cont_enq.exp_purchase_date=a.currDate:"fol"==e.selectedModel&&(e.sessionVariable.temp_cont_enq.fol_date=a.currDate)},e.pickTime=function(){a.getDate("time",e.pickTime_callback)},e.pickTime_callback=function(a){"folTime"==e.selectedModel&&(e.data.folTime=a.currTime)},e.getDateWithMonthName=function(e){return a.getDateWithMonthName(e)},e.getFolDateWithMonthName=function(t){if(!t){var s=a.addDays(new Date,1);t=a.convertDateToString(s,"yyyy-mm-dd"),e.sessionVariable.temp_cont_enq.fol_date=t}},e.saveTempEnquiry=function(){try{if(!e.sessionVariable.temp_cont_enq.model_interested)return void e.showAlertWindow_Titled("Error","Please select a model");if(!e.sessionVariable.temp_cont_enq.fol_date)return void e.showAlertWindow_Titled("Error","Please select a followup date");if(!e.sessionVariable.temp_cont_enq.existVeh)return void e.showAlertWindow_Titled("Error","Please select existing vehical type");if(e.sessionVariable.temp_cont_enq.exp_purchase_date){var s=e.sessionVariable.temp_cont_enq.fol_date,i=e.sessionVariable.temp_cont_enq.exp_purchase_date;if(2==a.isGreaterDate(s,i))return void e.showAlertWindow_Titled("Error","Followup date should be smaller then expected purchase date")}1==e.sessionVariable.temp_cont_enq.existVeh,e.showLoader("Please wait..."),e.requestData={},e.requestData=e.sessionVariable.temp_cont_enq,e.requestData.user_id=e.sessionVariable.username,e.requestData.state=e.getValueInJson(e.sessionVariable.state_list,e.sessionVariable.login_data.state_id,"id","state_name"),e.requestData.district=e.getValueInJson(e.sessionVariable.district_list,e.sessionVariable.login_data.district_id,"id","district_name"),e.requestData.tehsil=e.getValueInJson(e.sessionVariable.tehsil_list,e.sessionVariable.login_data.tehsil_id,"id","tehsil_name"),e.requestData.village=e.getValueInJson(e.sessionVariable.village_list,e.sessionVariable.login_data.village_id,"id","village_name"),e.requestData.exchange_req=e.sessionVariable.temp_cont_enq.exchange_req?"Y":"N",e.requestData.finance_req=e.sessionVariable.temp_cont_enq.finance_req?"Y":"N",e.requestData.existVeh=e.getValueInJson(e.veh_type_list,e.sessionVariable.temp_cont_enq.existVeh,"id","type"),e.requestData.existMake=e.getValueInJson(e.sessionVariable.make_list,e.sessionVariable.temp_cont_enq.existMake,"id","make_name");var n=e.sessionVariable.temp_cont_enq.fol_date,r=e.sessionVariable.temp_cont_enq.exp_purchase_date;e.requestData.fol_date=a.getDateInFormat(n,"mm/dd/yyyy"),e.requestData.exp_purchase_date=a.getDateInFormat(r,"mm/dd/yyyy"),e.requestData.dealer_code=e.sessionVariable.login_data.dealer_code,t.getDetails(t.getServices().SYNC_RECORDS,e.requestData,e.saveTempEnquiry_callback)}catch(l){alert(l),e.hideLoader()}},e.saveTempEnquiry_callback=function(a){e.hideLoader(),e.sessionVariable.temp_cont_enq.fol_date="",e.sessionVariable.temp_cont_enq.exp_purchase_date="",1==a.success?e.showAlertWindow_Titled("Success","Enquiry has been created successfully",e.after_saveTempVehicle):e.showAlertWindow_Titled("Error",a.resDescription)},e.after_saveTempVehicle=function(){e.sessionVariable.temp_cont_enq={},e.disableBack(),e.jumpTo("app.dashboard")}}]);
angular.module("starter.createNewEnquiry",[]).controller("createNewEnquiryCtrl",["$scope","generic_http_post_service","date_picker",function(e,t,a){e.sessionVariable.createEnquiry={},e.temp_cont_enq={},e.init=function(){var t=null;try{t=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.MAKE_MODEL)),t?(e.sessionVariable.make_list=t.make,e.sessionVariable.model_list=t.model,e.sessionVariable.model_interested=t.model_interested):e.get_make_model()}catch(a){console.log("make model not found  "+a)}},e.veh_type_list=[{id:1,type:"Two Wheeler"},{id:2,type:"Four wheeler"},{id:3,type:"First Time Buyer"}],e.selectedModel="",e.pickDate=function(t){e.selectedModel=t,a.getDate("date",e.pickDate_callback,!1)},e.pickDate_callback=function(t){"exp"==e.selectedModel?e.temp_cont_enq.exp_purchase_date=t.currDate:"fol"==e.selectedModel&&(e.temp_cont_enq.fol_date=t.currDate)},e.pickTime=function(){a.getDate("time",e.pickTime_callback)},e.pickTime_callback=function(t){"folTime"==e.selectedModel&&(e.data.folTime=t.currTime)},e.getDateWithMonthName=function(e){return a.getDateWithMonthName(e)},e.getFolDateWithMonthName=function(t){if(!t){var s=a.addDays(new Date,1);t=a.convertDateToString(s,"yyyy-mm-dd"),e.temp_cont_enq.fol_date=t}},e.saveTempEnquiry=function(){try{if(!e.temp_cont_enq.model_interested)return void e.showAlertWindow_Titled("Error","Please select a model");if(!e.temp_cont_enq.fol_date)return void e.showAlertWindow_Titled("Error","Please select a followup date");if(e.temp_cont_enq.exp_purchase_date){var s=e.temp_cont_enq.fol_date,i=e.temp_cont_enq.exp_purchase_date;if(2==a.isGreaterDate(s,i))return void e.showAlertWindow_Titled("Error","Followup date should be smaller then expected purchase date")}if(!e.temp_cont_enq.existVeh)return void e.showAlertWindow_Titled("Error","Please select existing vehical type");1==e.temp_cont_enq.existVeh,e.showLoader("Please wait..."),e.requestData={},e.requestData=e.temp_cont_enq,e.requestData.user_id=e.sessionVariable.username,e.requestData.fname=e.sessionVariable.contact_list.selected_item.FST_NAME,e.requestData.lname=e.sessionVariable.contact_list.selected_item.LAST_NAME,e.requestData.mobile=e.sessionVariable.contact_list.selected_item.CELL_PH_NUM,e.requestData.gender=e.sessionVariable.contact_list.selected_item.GENDER,e.requestData.age=e.sessionVariable.contact_list.selected_item.AGE,e.sessionVariable.contact_list.selected_item.ADDR&&(e.requestData.address1=e.sessionVariable.contact_list.selected_item.ADDR),e.requestData.state=e.sessionVariable.contact_list.selected_item.STATE,e.requestData.district=e.sessionVariable.contact_list.selected_item.DISTRICT,e.requestData.tehsil=e.sessionVariable.contact_list.selected_item.TEHSIL,e.requestData.village=e.sessionVariable.contact_list.selected_item.CITY,e.requestData.exchange_req=e.temp_cont_enq.exchange_req?"Y":"N",e.requestData.finance_req=e.temp_cont_enq.finance_req?"Y":"N",e.requestData.existVeh=e.getValueInJson(e.veh_type_list,e.temp_cont_enq.existVeh,"id","type"),e.requestData.existMake=e.getValueInJson(e.sessionVariable.make_list,e.temp_cont_enq.existMake,"id","make_name");var n=e.temp_cont_enq.fol_date,o=e.temp_cont_enq.exp_purchase_date;e.requestData.fol_date=a.getDateInFormat(n,"mm/dd/yyyy"),e.requestData.exp_purchase_date=a.getDateInFormat(o,"mm/dd/yyyy"),e.requestData.dealer_code=e.sessionVariable.login_data.dealer_code,console.log(JSON.stringify(e.requestData)),t.getDetails(t.getServices().SYNC_RECORDS,e.requestData,e.saveTempEnquiry_callback)}catch(r){alert(r),e.hideLoader()}},e.saveTempEnquiry_callback=function(t){e.hideLoader(),e.temp_cont_enq.fol_date="",e.temp_cont_enq.exp_purchase_date="",1==t.success?(e.showAlertWindow_Titled("Success","Enquiry has been created successfully",e.after_saveTempVehicle),e.closeModal()):e.showAlertWindow_Titled("Error",t.resDescription)},e.after_saveTempVehicle=function(){e.temp_cont_enq={},e.disableBack(),e.jumpTo("app.dashboard")}}]);
angular.module("starter.searchEnquiryList",[]).controller("searchEnquiryListCtrl",["$scope","$ionicPopup","$timeout","generic_http_post_service","date_picker",function(e,a,t,r,l){e.arrayList={},e.showDetail=function(a){e.sessionVariable.selected_enquiry=a,e.jumpTo("app.enquiryDetail")},e.$on("filterFollowups",function(a,t){e.filterFollowups()}),e.init=function(){e.dataRefreshing=!0,e.sessionVariable.ten_days_followup={},e.find_10_days_data()},e.find_10_days_data=function(){var a=null;try{a=JSON.parse(e.GetInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW))}catch(t){}try{a?(e.sessionVariable.ten_days_followup=a,e.matchDate()?e.filterFollowups():e.Fetch_10_days_Enquiry()):e.Fetch_10_days_Enquiry()}catch(t){alert(t)}},e.Fetch_10_days_Enquiry=function(){e.requestData={},e.requestData.user_id=e.sessionVariable.username,r.getDetails(r.getServices().GET_FOLLOW_UP,e.requestData,e.Fetch_10_days_Enquiry_callback)},e.matchDate=function(){var a=!1;try{if(e.sessionVariable.ten_days_followup.date){var t=l.convertDateToString(new Date,"mm/dd/yyyy");t==e.sessionVariable.ten_days_followup.date&&(a=!0)}}catch(r){alert(r)}return a},e.Fetch_10_days_Enquiry_callback=function(a){e.dataRefreshing=!1,1==a.success?(e.SaveInLocalStorage(e.localStorageKeys.TEN_DAY_FOLLOW,JSON.stringify(a)),e.sessionVariable.ten_days_followup=a,e.filterFollowups()):e.showAlertWindow_Titled("Error",a.respDescription,null,null)},e.applyfilterFollowups=function(){e.goBackScreen(),e.jumpTo("app.searchEnquiryList")},e.filterFollowups=function(){var a=void 0;2==e.search_filter.finance?a="Y":3==e.search_filter.finance&&(a="N");var t=[];angular.forEach(e.sessionVariable.ten_days_followup.follow_up,function(r){var l=!0,n=!0,s=!0,o=!0,i=!0;e.search_filter.NXT&&e.search_filter.IsNextDate&&e.search_filter.NXT!=e.convertFormatOfDate(r.FOLLOW_DATE)&&(l=!1),e.search_filter.EXP_FROM&&e.search_filter.EXP_TO&&e.search_filter.IsExpDate&&!e.dateInRange(e.search_filter.EXP_FROM,e.search_filter.EXP_TO,r.EXPCTD_DT_PURCHASE.toLowerCase())&&(n=!1),e.search_filter.MODEL&&e.search_filter.MODEL.toLowerCase()!=r.X_MODEL_INTERESTED.toLowerCase()&&(o=!1),a&&a.toLowerCase()!=r.X_FINANCE_REQUIRED.toLowerCase()&&(i=!1),l&&n&&s&&o&&i&&t.push(r)}),e.arrayList.follow_up=t,e.dataRefreshing=!1},e.dateInRange=function(e,a,t){var r=new Array("jan","feb","mar","apr","may","jun","jul","aug","sep","cct","nov","dec"),n=!1;try{var s=e.split("-"),o=a.split("-"),i=t.split("-"),c=new Date(s[0],s[1]-1,s[2]),_=new Date(o[0],o[1]-1,o[2]);c=l.addDays(c,-1),_=l.addDays(_,1);var u=new Date("20"+i[2],r.indexOf(i[1].toLowerCase()),i[0]);u>c&&_>u&&(n=!0)}catch(f){}return n},e.convertFormatOfDate=function(e){function a(e){return(""+e).length<2&&(e="0"+e),e}var t="",r=new Array("jan","feb","mar","apr","may","jun","jul","aug","sep","cct","nov","dec"),l=e.split("-"),n=new Date("20"+l[2],r.indexOf(l[1].toLowerCase()),l[0]);return t=n.getFullYear()+"-"+a(n.getMonth()+1)+"-"+a(n.getDate())},e.clear_filter=function(){e.showConfirm("Are you sure","Do you really want to clear filter from search list?",null,e.clear_filter_callback)},e.clear_filter_callback=function(){e.search_filter={},e.search_filter.finance=1,e.filterFollowups()}}]);