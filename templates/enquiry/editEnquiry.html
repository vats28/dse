<ion-view cache-view="false" ng-controller="editEnquiryCtrl" view-title="Add Personal Info" class="black-bg">
    <fab-button ng-if="tab3" class="animated zoomInDown" ng-click="saveTempEnquiry()">
        <i class="icon ion ion-ios-arrow-forward "></i>
    </fab-button>

    <div class="tabs-striped  tabs-top tabs-background-assertive tabs-color-light">
        <!--<div class="tabs-striped  tabs-top tabs-background-dark tabs-color-assertive">-->
        <div class="tabs tabs-icon-top">
            <a class="tab-item " ng-class="tab1 ? 'active' : ''" style="max-width:none !important;" ng-click="onTab1_click()">
                <i class="icon ion-person"></i> <span class="">Contact</span>
            </a>
            <a class="tab-item" ng-class="tab2 ? 'active' : ''" style="max-width:none !important;" ng-click="onTab2_click()">
                <i class="icon ion-location "></i> <span class="">Address</span>
            </a>
            <a class="tab-item" ng-class="tab3 ? 'active' : ''" style="max-width:none !important;" ng-click="onTab3_click()">
                <i class="icon ion-ios-paper "></i> <span class="">Enquiry</span>
            </a>
        </div>
    </div>
    <ion-content class="has-header has-subheader" ng-init="init()">

        <div class="list">
            <div ng-show="tab1">
                <div class="item item-divider">Contact Detail</div>
                <label class="item item-input">
                    <span class="input-label">First Name</span>
                    <input type="text" ng-disabled="disableCase.ONE" ng-model="sessionVariable.temp_cont_enq.FST_NAME" placeholder="eg: Pradeep">
                    <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                </label>
                <label class="item item-input">
                    <span class="input-label">Last Name</span>
                    <input type="text" ng-disabled="disableCase.ONE" ng-model="sessionVariable.temp_cont_enq.LAST_NAME" placeholder="eg : sharma">
                    <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                </label>
                <label class="item item-input">
                    <span class="input-label">Mobile</span>
                    <input ng-model="sessionVariable.temp_cont_enq.CELL_PH_NUM" ng-disabled="disableCase.ONE" maxlength="10" type="tel" placeholder="10 digit mobile no.">
                    <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                </label>
                <label class="item item-input">
                    <span class="input-label">Email</span>
                    <input ng-model="sessionVariable.temp_cont_enq.EMAIL_ADDR" type="text" placeholder="eg. abc@xyz.com">
                </label>

                <div class="item padding-0">
                    <div class="row">
                        <div class="col r-border date-col">
                            <h2 class="dark">Age </h2>
                            <input ng-model="sessionVariable.temp_cont_enq.AGE" type="number" min="1" max="99" placeholder="eg: 23" ng-keypress="checkNumberLength($event)"
                                style="width: 100%;">
                        </div>
                        <div class="col date-col">

                            <h2 class="dark">Gender </h2>
                            <select ng-model="sessionVariable.temp_cont_enq.GENDER" class="v-select" style="font-size: 14px" ng-model="temp.gender">
                                <option value="">--select--</option>
                                <option value="M">Male</option>
                                <option value="F">Female</option>

                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-show="tab2">
                <div class="item item-divider">Address Detail</div>
                <li class="item item-toggle">
                    Allow Edit Below
                    <label class="toggle toggle-assertive">
                        <input type="checkbox" ng-model="disableCase.TWO" ng-change="toggleAddressEdit()">
                        <div class="track">
                            <div class="handle"></div>
                        </div>
                    </label>
                </li>
                <div ng-show="!disableCase.TWO">
                    <label class="item item-input">
                        <span class="input-label">State</span>
                        <input type="text" class="edit_enquiry_disable_input" ng-disabled="!disableCase.TWO" ng-model="sessionVariable.selected_enquiry_edit.STATE">
                        <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                    </label>
                    <label class="item item-input">
                        <span class="input-label">District</span>
                        <input type="text" class="edit_enquiry_disable_input" ng-disabled="!disableCase.TWO" ng-model="sessionVariable.selected_enquiry_edit.DISTRICT">
                        <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                    </label>
                    <label class="item item-input">
                        <span class="input-label">Tehsil</span>
                        <input type="text" ng-model="sessionVariable.selected_enquiry_edit.TEHSIL" class="edit_enquiry_disable_input" ng-disabled="!disableCase.TWO">
                        <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                    </label>
                    <label class="item item-input">
                        <span class="input-label">City/Village/Town</span>
                        <input type="text" ng-model="sessionVariable.selected_enquiry_edit.CITY" class="edit_enquiry_disable_input" ng-disabled="!disableCase.TWO">
                        <i class="  {{validationClass.ERROR}}  input_icon_right"></i>
                    </label>
                </div>
                <div ng-show="disableCase.TWO">
                    <label class="item item-input item-select">
                        <div class="input-label">
                            State
                        </div>
                        <select ng-model="sessionVariable.temp_cont_enq.state_id" ng-change="onStateChange()">
                            <!--<option value="">-- select state --</option>-->
                            <option ng-repeat="item in sessionVariable.temp_cont_enq.state_list" value="{{item.id}}" ng-selected="{{item.id == sessionVariable.temp_cont_enq.state_id}}">
                                {{item.state_name}}
                            </option>
                        </select>
                    </label>

                    <label class="item item-input item-select">
                        <div class="input-label">
                            District
                        </div>
                        <select ng-model="sessionVariable.temp_cont_enq.district_id" ng-change="onDistrictChange()">
                            <option value="">-- select --</option>
                            <option ng-repeat="item in sessionVariable.temp_cont_enq.district_list" ng-selected="{{item.id == sessionVariable.temp_cont_enq.district_id}}"
                            value="{{item.id}}">
                                {{item.district_name}}
                            </option>
                        </select>
                    </label>

                    <label class="item item-input item-select">
                        <div class="input-label">
                            Tehsil
                        </div>
                        <select ng-model="sessionVariable.temp_cont_enq.tehsil_id" ng-change="onTehsilChange()">
                            <option value="">-- select --</option>
                            <option ng-repeat="item in sessionVariable.temp_cont_enq.tehsil_list" ng-if="item.district_id == sessionVariable.temp_cont_enq.district_id"
                            ng-selected="{{item.id == sessionVariable.temp_cont_enq.tehsil_id}}" value="{{item.id}}">
                                {{item.tehsil_name}}
                            </option>
                        </select>
                    </label>

                    <label class="item item-input item-select">
                        <div class="input-label">
                            City/Village/Town
                        </div>

                        <select ng-model="sessionVariable.temp_cont_enq.village_id">
                            <option value="">-- select --</option>
                            <option ng-if="item.tehsil_id == sessionVariable.temp_cont_enq.tehsil_id" ng-repeat="item in sessionVariable.temp_cont_enq.village_list"
                            value="{{item.id}}">
                                {{item.village_name}}
                            </option>
                        </select>


                    </label>
                </div>

                <label class="item item-input">
                    <span class="input-label">Address 1</span>
                    <input type="text" ng-model="sessionVariable.temp_cont_enq.ADDR" placeholder="eg : your primary address">
                    <!--<i class="  {{validationClass.ERROR}}  input_icon_right"></i>-->
                </label>
                <label class="item item-input">
                    <span class="input-label">Address 2</span>
                    <input type="text" ng-model="sessionVariable.temp_cont_enq.ADDR_LINE_2" placeholder="eg : any other address">
                </label>
                <label class="item item-input">
                    <span class="input-label">Pincode</span>
                    <input type="tel" maxlength="6" ng-model="sessionVariable.temp_cont_enq.pincode" placeholder="eg : 1109018">
                </label>


            </div>

        </div>
        <!--enquiry info from here-->
        <div ng-show="tab3">
            <div class="card">

                <div class="item item-input item-select item-text-wrap " style="background-color: #CBCBCB; font-weight: bold">
                    <div class="input-label">
                        Model
                        <!--Model interested in-->
                    </div>
                    <select class="red-select" ng-model="sessionVariable.temp_cont_enq.X_MODEL_INTERESTED" ng-change="onModelChange(sessionVariable.temp_cont_enq.X_MODEL_INTERESTED, false)"
                    ng-init="onModelChange(sessionVariable.temp_cont_enq.X_MODEL_INTERESTED, true)" style="width: 50% !important; align:center">
                    <!--<select class="red-select" ng-model="sessionVariable.temp_cont_enq.X_MODEL_INTERESTED" style="width: 50% !important; align:center">-->
                        <option value="">--select--</option>
                        <option ng-repeat="item in sessionVariable.temp_cont_enq.model_interested" ng-selected="item.model_name == sessionVariable.temp_cont_enq.X_MODEL_INTERESTED"
                        value="{{item.model_name}}">{{item.model_name}}
                        </option>
                    </select>
                </div>


                <div class="item padding-0 item-text-wrap">
                    <div class="row">
                        <div class="col r-border date-col">
                            <ion-checkbox ng-model="sessionVariable.temp_cont_enq.exchange_req">Exchange Required</ion-checkbox>
                        </div>
                        <div class="col date-col">
                            <ion-checkbox ng-model="sessionVariable.temp_cont_enq.finance_req">Finance Required</ion-checkbox>
                        </div>
                    </div>
                </div>
                <div class="item padding-0 item-text-wrap">
                    <div class="row">
                        <div class="col date-col">
                            <ion-checkbox ng-model="sessionVariable.temp_cont_enq.test_ride">Testride Required</ion-checkbox>
                        </div>
                    </div>
                </div>


                <div class="item padding-0 item-text-wrap">
                    <div class="row">
                        <div class="col r-border date-col" ng-click="pickDate('fol')">
                            <h2 class="dark">Next followup date</h2>

                            <p ng-bind="getDateWithMonthName(sessionVariable.temp_cont_enq.FOLLOW_DATE)">16-oct-2015</p>
                            <p ng-bind="getFolDateWithMonthName(sessionVariable.temp_cont_enq.FOLLOW_DATE)" ng-if="!sessionVariable.temp_cont_enq.FOLLOW_DATE">-- select --</p>
                        </div>

                        <div class="col date-col" ng-click="pickDate('exp')">
                            <h2 class="dark">Expected date of purchase </h2>

                            <p ng-bind="getDateWithMonthName(sessionVariable.temp_cont_enq.EXPCTD_DT_PURCHASE)">16-oct-2015</p>

                            <p ng-if="!sessionVariable.temp_cont_enq.EXPCTD_DT_PURCHASE">-- select --</p>
                        </div>
                    </div>
                </div>



                <label class="item item-input item-stacked-label">
                    <span class="input-label">Remark</span>
                    <input type="text" ng-model="sessionVariable.temp_cont_enq.FOLLOWUP_COMMENTS" placeholder="eg. anything worth noting">
                </label>
            </div>



            <div class="card">
                <label class="item item-input item-select">
                    <div class="input-label">
                        Existing Vehicle
                    </div>
                    <select ng-model="sessionVariable.temp_cont_enq.existVeh" ng-change="onExistVeh_Change()">
                        <option value="" selected>Select</option>
                        <option ng-repeat="item in veh_type_list" ng-selected="item.id == sessionVariable.temp_cont_enq.existVeh" value="{{item.id}}">{{item.type}}</option>
                    </select>
                </label>


                <label ng-if="sessionVariable.temp_cont_enq.existVeh == 1" class="item item-input item-select" ng-class="{'item-stable' : !sessionVariable.temp_cont_enq.existVeh}">
                    <div class="input-label">
                        Make
                    </div>
                    <select ng-model="sessionVariable.temp_cont_enq.existMake" ng-change="onExistMake_Change()" ng-disabled="!sessionVariable.temp_cont_enq.existVeh">
                        <option value="">select</option>
                        <option ng-repeat="item in sessionVariable.temp_cont_enq.make_list" ng-selected="item.id == sessionVariable.temp_cont_enq.existMake"
                        value="{{item.id}}">{{item.make_name}}</option>
                    </select>
                </label>

                <label ng-if="sessionVariable.temp_cont_enq.existVeh == 1" class="item item-input item-select" ng-class="{'item-stable' : !sessionVariable.temp_cont_enq.existMake}">
                    <div class="input-label">
                        Model
                    </div>
                    <select ng-model="sessionVariable.temp_cont_enq.existModel" ng-disabled="!sessionVariable.temp_cont_enq.existMake">
                        <option value="">select</option>
                        <option ng-repeat="item in sessionVariable.temp_cont_enq.model_list" ng-if="sessionVariable.temp_cont_enq.existMake == item.make_id"
                        value="{{item.model_name}}">{{item.model_name}}</option>
                    </select>
                </label>


            </div>

            <div class="card" ng-if="sessionVariable.campaign.campaign_data.length > 0">
                <div class="item item-divider" style="background-color: #CBCBCB; font-weight: bold">
                    Campaigns
                </div>
                    <!--ng repeat for new campaigns   isCampaignSeleted($index)  -->
                <div class="item item-text-wrap padding-0" ng-repeat="item in sessionVariable.campaign.campaign_data ">
                    <ion-checkbox ng-model="item.check" ng-change="onChangeCampaign($index)"  ng-checked="item.check || isCampaignSeleted($index)"  
                    ng-if="!item.model || item.model == sessionVariable.temp_cont_enq.X_MODEL_INTERESTED ">
                        <p ng-bind="item.campaign_name + ' ('+ item.camp_type +')' "></p>
                        <p ng-bind="'Source: ' + item.camp_source + ', Status: ' + item.status"></p>
                        <p ng-bind="'Date: ' + item.start_date +' to '+ (item.end_date?item.end_date:'-NA-')"></p>
                        <p ng-bind="'Category: ' + item.category + ', Sub-Category: ' + item.sub_category"></p>
                    </ion-checkbox>
                </div>


                 <!--ng repeat for already included campaign campaigns-->
                 <div class="item item-text-wrap padding-0" ng-repeat="item in sessionVariable.contact_list.campaign ">
                    <ion-checkbox ng-model="item.check" ng-disabled="true" ng-if="!isCampaignOpen($index) && taggedWithEnquiry($index)" ng-checked="true" >
                        <p ng-bind="item.CAMPAIGN_NAME"></p>
                    </ion-checkbox>
                </div>
            </div>
        </div>
        <br/>
        <br/>
    </ion-content>
</ion-view>